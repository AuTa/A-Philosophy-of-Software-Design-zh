import{_ as e,d as t}from"./app.70deb030.js";const o={},i=t('<h1 id="\u7B2C-15-\u7AE0-\u5148\u5199\u8BC4\u8BBA" tabindex="-1"><a class="header-anchor" href="#\u7B2C-15-\u7AE0-\u5148\u5199\u8BC4\u8BBA" aria-hidden="true">#</a> \u7B2C 15 \u7AE0 \u5148\u5199\u8BC4\u8BBA</h1><blockquote><p>Chapter 15 Write The Comments First(Use Comments As Part Of The Design Process)</p></blockquote><p>Many developers put off writing documentation until the end of the development process, after coding and unit testing are complete. This is one of the surest ways to produce poor quality documentation. The best time to write comments is at the beginning of the process, as you write the code. Writing the comments first makes documentation part of the design process. Not only does this produce better documentation, but it also produces better designs and it makes the process of writing documentation more enjoyable.</p><blockquote><p>\u5728\u5B8C\u6210\u7F16\u7801\u548C\u5355\u5143\u6D4B\u8BD5\u4E4B\u540E\uFF0C\u8BB8\u591A\u5F00\u53D1\u4EBA\u5458\u63A8\u8FDF\u7F16\u5199\u6587\u6863\uFF0C\u76F4\u5230\u5F00\u53D1\u8FC7\u7A0B\u7ED3\u675F\u3002\u8FD9\u662F\u4EA7\u751F\u8D28\u91CF\u5DEE\u7684\u6587\u6863\u7684\u6700\u53EF\u9760\u65B9\u6CD5\u4E4B\u4E00\u3002\u7F16\u5199\u6CE8\u91CA\u7684\u6700\u4F73\u65F6\u95F4\u662F\u5728\u8FC7\u7A0B\u5F00\u59CB\u65F6\u3002\u9996\u5148\u7F16\u5199\u6CE8\u91CA\u4F7F\u6587\u6863\u6210\u4E3A\u8BBE\u8BA1\u8FC7\u7A0B\u7684\u4E00\u90E8\u5206\u3002\u8FD9\u4E0D\u4EC5\u53EF\u4EE5\u4EA7\u751F\u66F4\u597D\u7684\u6587\u6863\uFF0C\u8FD8\u53EF\u4EE5\u4EA7\u751F\u66F4\u597D\u7684\u8BBE\u8BA1\uFF0C\u5E76\u4F7F\u7F16\u5199\u6587\u6863\u7684\u8FC7\u7A0B\u66F4\u52A0\u6109\u5FEB\u3002</p></blockquote><h2 id="_15-1-delayed-comments-are-bad-comments-\u8BC4\u8BBA\u5EF6\u8FDF\u662F\u4E0D\u597D\u7684\u8BC4\u8BBA" tabindex="-1"><a class="header-anchor" href="#_15-1-delayed-comments-are-bad-comments-\u8BC4\u8BBA\u5EF6\u8FDF\u662F\u4E0D\u597D\u7684\u8BC4\u8BBA" aria-hidden="true">#</a> 15.1 Delayed comments are bad comments \u8BC4\u8BBA\u5EF6\u8FDF\u662F\u4E0D\u597D\u7684\u8BC4\u8BBA</h2><p>Almost every developer I have ever met puts off writing comments. When asked why they don\u2019t write documentation earlier, they say that the code is still changing. If they write documentation early, they say, they\u2019ll have to rewrite it when the code changes; better to wait until the code stabilizes. However, I suspect that there is also another reason, which is that they view documentation as drudge work; thus, they put it off as long as possible.</p><blockquote><p>\u6211\u89C1\u8FC7\u7684\u51E0\u4E4E\u6BCF\u4E2A\u5F00\u53D1\u4EBA\u5458\u90FD\u4F1A\u63A8\u8FDF\u53D1\u8868\u8BC4\u8BBA\u3002\u5F53\u88AB\u95EE\u53CA\u4E3A\u4EC0\u4E48\u4E0D\u66F4\u65E9\u7F16\u5199\u6587\u6863\u65F6\uFF0C\u4ED6\u4EEC\u8BF4\u4EE3\u7801\u4ECD\u5728\u66F4\u6539\u3002\u4ED6\u4EEC\u8BF4\uFF0C\u5982\u679C\u4ED6\u4EEC\u5C3D\u65E9\u7F16\u5199\u6587\u6863\uFF0C\u5219\u5FC5\u987B\u5728\u4EE3\u7801\u66F4\u6539\u65F6\u91CD\u65B0\u7F16\u5199\u6587\u6863\u3002\u6700\u597D\u7B49\u5230\u4EE3\u7801\u7A33\u5B9A\u4E0B\u6765\u3002\u4F46\u662F\uFF0C\u6211\u6000\u7591\u8FD8\u6709\u53E6\u4E00\u4E2A\u539F\u56E0\uFF0C\u90A3\u5C31\u662F\u4ED6\u4EEC\u5C06\u6587\u6863\u89C6\u4E3A\u7E41\u7410\u7684\u5DE5\u4F5C\u3002\u56E0\u6B64\uFF0C\u4ED6\u4EEC\u5C3D\u53EF\u80FD\u5730\u63A8\u8FDF\u4E86\u3002</p></blockquote><p>Unfortunately, this approach has several negative consequences. First, delaying documentation often means that it never gets written at all. Once you start delaying, it\u2019s easy to delay a bit more; after all, the code will be even more stable in a few more weeks. By the time the code has inarguably stabilized, there is a lot of it, which means the task of writing documentation has become huge and even less attractive. There\u2019s never a convenient time to stop for a few days and fill in all of the missing comments, and it\u2019s easy to rationalize that the best thing for the project is to move on and fix bugs or write the next new feature. This will create even more undocumented code.</p><blockquote><p>\u4E0D\u5E78\u7684\u662F\uFF0C\u8FD9\u79CD\u65B9\u6CD5\u6709\u51E0\u4E2A\u8D1F\u9762\u5F71\u54CD\u3002\u9996\u5148\uFF0C\u5EF6\u8FDF\u6587\u6863\u901A\u5E38\u610F\u5473\u7740\u6839\u672C\u65E0\u6CD5\u7F16\u5199\u6587\u6863\u3002\u4E00\u65E6\u5F00\u59CB\u5EF6\u8FDF\uFF0C\u5C31\u5BB9\u6613\u518D\u5EF6\u8FDF\u4E00\u4E9B\u3002\u6BD5\u7ADF\uFF0C\u4EE3\u7801\u5C06\u5728\u51E0\u5468\u540E\u53D8\u5F97\u66F4\u52A0\u7A33\u5B9A\u3002\u5230\u4E86\u4EE3\u7801\u6BEB\u65E0\u7591\u95EE\u5730\u7A33\u5B9A\u4E0B\u6765\u7684\u65F6\u5019\uFF0C\u4EE3\u7801\u5DF2\u7ECF\u5F88\u591A\u4E86\uFF0C\u8FD9\u610F\u5473\u7740\u7F16\u5199\u6587\u6863\u7684\u4EFB\u52A1\u53D8\u5F97\u8D8A\u6765\u8D8A\u5E9E\u5927\uFF0C\u5438\u5F15\u529B\u4E5F\u8D8A\u6765\u8D8A\u5C0F\u3002\u4ECE\u6765\u6CA1\u6709\u4E00\u4E2A\u65B9\u4FBF\u7684\u65F6\u95F4\u53EF\u4EE5\u505C\u4E0B\u6765\u51E0\u5929\u5E76\u586B\u5199\u6240\u6709\u9057\u6F0F\u7684\u6CE8\u91CA\uFF0C\u5E76\u4E14\u5F88\u5BB9\u6613\u4F7F\u8BE5\u9879\u76EE\u7684\u6700\u4F73\u9009\u62E9\u5408\u7406\u5316\uFF0C\u90A3\u5C31\u662F\u7EE7\u7EED\u5E76\u4FEE\u590D\u9519\u8BEF\u6216\u7F16\u5199\u4E0B\u4E00\u4E2A\u65B0\u529F\u80FD\u3002\u8FD9\u5C06\u521B\u5EFA\u66F4\u591A\u672A\u8BB0\u5F55\u7684\u4EE3\u7801\u3002</p></blockquote><p>Even if you do have the self-discipline to go back and write the comments (and don\u2019t fool yourself: you probably don\u2019t), the comments won\u2019t be very good. By this time in the process, you have checked out mentally. In your mind, this piece of code is done; you are eager to move on to your next project. You know that writing comments is the right thing to do, but it\u2019s no fun. You just want to get through it as quickly as possible. Thus, you make a quick pass over the code, adding just enough comments to look respectable. By now, it\u2019s been a while since you designed the code, so your memories of the design process are becoming fuzzy. You look at the code as you are writing the comments, so the comments repeat the code. Even if you try to reconstruct the design ideas that aren\u2019t obvious from the code, there will be things you don\u2019t remember. Thus, the comments are missing some of the most important things they should describe.</p><blockquote><p>\u5373\u4F7F\u4F60\u6709\u81EA\u5F8B\u6027\u56DE\u53BB\u5199\u8BC4\u8BBA(\u4E0D\u8981\u6B3A\u9A97\u4F60\u81EA\u5DF1:\u4F60\u53EF\u80FD\u6CA1\u6709)\uFF0C\u8BC4\u8BBA\u4E5F\u4E0D\u4F1A\u5F88\u597D\u3002\u5728\u8FD9\u4E2A\u8FC7\u7A0B\u7684\u8FD9\u4E2A\u65F6\u5019\uFF0C\u4F60\u5DF2\u7ECF\u5728\u7CBE\u795E\u4E0A\u79BB\u5F00\u4E86\u3002\u5728\u4F60\u7684\u8111\u6D77\u4E2D\uFF0C\u8FD9\u6BB5\u4EE3\u7801\u5DF2\u7ECF\u5B8C\u6210\u4E86;\u4F60\u6025\u4E8E\u5F00\u59CB\u4E0B\u4E00\u4E2A\u9879\u76EE\u3002\u4F60\u77E5\u9053\u5199\u8BC4\u8BBA\u662F\u6B63\u786E\u7684\u4E8B\u60C5\uFF0C\u4F46\u5B83\u6CA1\u6709\u4E50\u8DA3\u3002\u4F60\u53EA\u60F3\u5C3D\u5FEB\u5EA6\u8FC7\u96BE\u5173\u3002\u56E0\u6B64\uFF0C\u60A8\u53EF\u4EE5\u5FEB\u901F\u5730\u6D4F\u89C8\u4EE3\u7801\uFF0C\u6DFB\u52A0\u8DB3\u591F\u7684\u6CE8\u91CA\u4EE5\u4F7F\u5176\u770B\u8D77\u6765\u4EE4\u4EBA\u6EE1\u610F\u3002\u5230\u76EE\u524D\u4E3A\u6B62\uFF0C\u60A8\u5DF2\u7ECF\u6709\u4E00\u6BB5\u65F6\u95F4\u6CA1\u6709\u8BBE\u8BA1\u4EE3\u7801\u4E86\uFF0C\u6240\u4EE5\u60A8\u5BF9\u8BBE\u8BA1\u8FC7\u7A0B\u7684\u8BB0\u5FC6\u53D8\u5F97\u6A21\u7CCA\u4E86\u3002\u60A8\u5728\u7F16\u5199\u6CE8\u91CA\u65F6\u67E5\u770B\u4EE3\u7801\uFF0C\u56E0\u6B64\u6CE8\u91CA\u91CD\u590D\u4E86\u4EE3\u7801\u3002\u5373\u4F7F\u60A8\u8BD5\u56FE\u91CD\u6784\u4EE3\u7801\u4E2D\u4E0D\u660E\u663E\u7684\u8BBE\u8BA1\u601D\u60F3\uFF0C\u4E5F\u4F1A\u6709\u60A8\u4E0D\u8BB0\u5F97\u7684\u4E8B\u60C5\u3002\u56E0\u6B64\uFF0C\u8FD9\u4E9B\u8BC4\u8BBA\u5FFD\u7565\u4E86\u4ED6\u4EEC\u5E94\u8BE5\u63CF\u8FF0\u7684\u4E00\u4E9B\u6700\u91CD\u8981\u7684\u4E8B\u60C5\u3002</p></blockquote><h2 id="_15-2-write-the-comments-first-\u9996\u5148\u5199\u8BC4\u8BBA" tabindex="-1"><a class="header-anchor" href="#_15-2-write-the-comments-first-\u9996\u5148\u5199\u8BC4\u8BBA" aria-hidden="true">#</a> 15.2 Write the comments first \u9996\u5148\u5199\u8BC4\u8BBA</h2><p>I use a different approach to writing comments, where I write the comments at the very beginning:</p><blockquote><p>\u6211\u4F7F\u7528\u4E00\u79CD\u4E0D\u540C\u7684\u65B9\u6CD5\u6765\u7F16\u5199\u8BC4\u8BBA\uFF0C\u5728\u5F00\u59CB\u65F6\u5C31\u5199\u8BC4\u8BBA\uFF1A</p></blockquote><ul><li>For a new class, I start by writing the class interface comment.</li><li>Next, I write interface comments and signatures for the most important public methods, but I leave the method bodies empty.</li><li>I iterate a bit over these comments until the basic structure feels about right.</li><li>At this point I write declarations and comments for the most important class instance variables in the class.</li><li>Finally, I fill in the bodies of the methods, adding implementation comments as needed.</li><li>While writing method bodies, I usually discover the need for additional methods and instance variables. For each new method I write the interface comment before the body of the method; for instance variables I fill in the comment at the same time that I write the variable declaration.</li></ul><hr><blockquote><ul><li>\u5BF9\u4E8E\u65B0\u7C7B\uFF0C\u6211\u9996\u5148\u7F16\u5199\u7C7B\u63A5\u53E3\u6CE8\u91CA\u3002</li><li>\u63A5\u4E0B\u6765\uFF0C\u6211\u4E3A\u6700\u91CD\u8981\u7684\u516C\u5171\u65B9\u6CD5\u7F16\u5199\u63A5\u53E3\u6CE8\u91CA\u548C\u7B7E\u540D\uFF0C\u4F46\u5C06\u65B9\u6CD5\u4E3B\u4F53\u4FDD\u7559\u4E3A\u7A7A\u3002</li><li>\u6211\u5BF9\u8FD9\u4E9B\u8BC4\u8BBA\u8FDB\u884C\u4E86\u8FED\u4EE3\uFF0C\u76F4\u5230\u57FA\u672C\u7ED3\u6784\u611F\u89C9\u6B63\u786E\u4E3A\u6B62\u3002</li><li>\u5728\u8FD9\u4E00\u70B9\u4E0A\uFF0C\u6211\u4E3A\u7C7B\u4E2D\u6700\u91CD\u8981\u7684\u7C7B\u5B9E\u4F8B\u53D8\u91CF\u7F16\u5199\u4E86\u58F0\u660E\u548C\u6CE8\u91CA\u3002</li><li>\u6700\u540E\uFF0C\u6211\u586B\u5199\u65B9\u6CD5\u7684\u4E3B\u4F53\uFF0C\u5E76\u6839\u636E\u9700\u8981\u6DFB\u52A0\u5B9E\u73B0\u6CE8\u91CA\u3002</li><li>\u5728\u7F16\u5199\u65B9\u6CD5\u4E3B\u4F53\u65F6\uFF0C\u6211\u901A\u5E38\u4F1A\u53D1\u73B0\u9700\u8981\u5176\u4ED6\u65B9\u6CD5\u548C\u5B9E\u4F8B\u53D8\u91CF\u3002\u5BF9\u4E8E\u6BCF\u4E2A\u65B0\u65B9\u6CD5\uFF0C\u6211\u5728\u65B9\u6CD5\u4E3B\u4F53\u4E4B\u524D\u7F16\u5199\u63A5\u53E3\u6CE8\u91CA\u3002\u4F8B\u5982\u53D8\u91CF\uFF0C\u6211\u5728\u7F16\u5199\u53D8\u91CF\u58F0\u660E\u7684\u540C\u65F6\u586B\u5199\u4E86\u6CE8\u91CA\u3002</li></ul></blockquote><p>When the code is done, the comments are also done. There is never a backlog of unwritten comments.</p><blockquote><p>\u4EE3\u7801\u5B8C\u6210\u540E\uFF0C\u6CE8\u91CA\u4E5F\u5C06\u5B8C\u6210\u3002\u4ECE\u6765\u6CA1\u6709\u79EF\u538B\u7684\u4E66\u9762\u8BC4\u8BBA\u3002</p></blockquote><p>The comments-first approach has three benefits. First, it produces better comments. If you write the comments as you are designing the class, the key design issues will be fresh in your mind, so it\u2019s easy to record them. It\u2019s better to write the interface comment for each method before its body, so you can focus on the method\u2019s abstraction and interface without being distracted by its implementation. During the coding and testing process you will notice and fix problems with the comments. As a result, the comments improve over the course of development.</p><blockquote><p>\u8BC4\u8BBA\u4F18\u5148\u7684\u65B9\u6CD5\u5177\u6709\u4E09\u4E2A\u597D\u5904\u3002\u9996\u5148\uFF0C\u5B83\u4F1A\u4EA7\u751F\u66F4\u597D\u7684\u8BC4\u8BBA\u3002\u5982\u679C\u60A8\u5728\u8BBE\u8BA1\u8BFE\u7A0B\u65F6\u5199\u8BC4\u8BBA\uFF0C\u90A3\u4E48\u5173\u952E\u7684\u8BBE\u8BA1\u95EE\u9898\u5C06\u5728\u60A8\u7684\u8111\u6D77\u4E2D\u6D6E\u73B0\uFF0C\u56E0\u6B64\u5F88\u5BB9\u6613\u8BB0\u5F55\u4E0B\u6765\u3002\u6700\u597D\u5728\u6BCF\u4E2A\u65B9\u6CD5\u7684\u4E3B\u4F53\u4E4B\u524D\u7F16\u5199\u63A5\u53E3\u6CE8\u91CA\uFF0C\u8FD9\u6837\u60A8\u5C31\u53EF\u4EE5\u4E13\u6CE8\u4E8E\u65B9\u6CD5\u7684\u62BD\u8C61\u548C\u63A5\u53E3\uFF0C\u800C\u4E0D\u4F1A\u56E0\u5176\u5B9E\u73B0\u800C\u5206\u5FC3\u3002\u5728\u7F16\u7801\u548C\u6D4B\u8BD5\u8FC7\u7A0B\u4E2D\uFF0C\u60A8\u4F1A\u6CE8\u610F\u5230\u5E76\u4FEE\u590D\u6CE8\u91CA\u95EE\u9898\u3002\u7ED3\u679C\uFF0C\u8BC4\u8BBA\u5728\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u5F97\u5230\u4E86\u6539\u5584\u3002</p></blockquote><h2 id="_15-3-comments-are-a-design-tool-\u8BC4\u8BBA\u662F\u4E00\u79CD\u8BBE\u8BA1\u5DE5\u5177" tabindex="-1"><a class="header-anchor" href="#_15-3-comments-are-a-design-tool-\u8BC4\u8BBA\u662F\u4E00\u79CD\u8BBE\u8BA1\u5DE5\u5177" aria-hidden="true">#</a> 15.3 Comments are a design tool \u8BC4\u8BBA\u662F\u4E00\u79CD\u8BBE\u8BA1\u5DE5\u5177</h2><p>The second, and most important, benefit of writing the comments at the beginning is that it improves the system design. Comments provide the only way to fully capture abstractions, and good abstractions are fundamental to good system design. If you write comments describing the abstractions at the beginning, you can review and tune them before writing implementation code. To write a good comment, you must identify the essence of a variable or piece of code: what are the most important aspects of this thing? It\u2019s important to do this early in the design process; otherwise you are just hacking code.</p><blockquote><p>\u5728\u5F00\u59CB\u65F6\u7F16\u5199\u6CE8\u91CA\u7684\u7B2C\u4E8C\u4E2A\u4E5F\u662F\u6700\u91CD\u8981\u7684\u597D\u5904\u662F\u53EF\u4EE5\u6539\u5584\u7CFB\u7EDF\u8BBE\u8BA1\u3002\u6CE8\u91CA\u63D0\u4F9B\u4E86\u5B8C\u5168\u6355\u83B7\u62BD\u8C61\u7684\u552F\u4E00\u65B9\u6CD5\uFF0C\u597D\u7684\u62BD\u8C61\u662F\u597D\u7684\u7CFB\u7EDF\u8BBE\u8BA1\u7684\u57FA\u7840\u3002\u5982\u679C\u60A8\u5728\u4E00\u5F00\u59CB\u5C31\u5199\u4E86\u63CF\u8FF0\u62BD\u8C61\u7684\u6CE8\u91CA\uFF0C\u5219\u53EF\u4EE5\u5728\u7F16\u5199\u5B9E\u73B0\u4EE3\u7801\u4E4B\u524D\u5BF9\u5176\u8FDB\u884C\u68C0\u67E5\u548C\u8C03\u6574\u3002\u8981\u5199\u4E00\u4E2A\u597D\u7684\u8BC4\u8BBA\uFF0C\u60A8\u5FC5\u987B\u786E\u5B9A\u4E00\u4E2A\u53D8\u91CF\u6216\u4E00\u6BB5\u4EE3\u7801\u7684\u672C\u8D28\uFF1A\u8FD9\u4EF6\u4E8B\u6700\u91CD\u8981\u7684\u65B9\u9762\u662F\u4EC0\u4E48\uFF1F\u5728\u8BBE\u8BA1\u8FC7\u7A0B\u7684\u65E9\u671F\u8FDB\u884C\u6B64\u64CD\u4F5C\u5F88\u91CD\u8981\uFF1B\u5426\u5219\uFF0C\u60A8\u53EA\u662F\u5728\u7834\u89E3\u4EE3\u7801\u3002</p></blockquote><p>Comments serve as a canary in the coal mine of complexity. If a method or variable requires a long comment, it is a red flag that you don\u2019t have a good abstraction. Remember from Chapter 4 that classes should be deep: the best classes have very simple interfaces yet implement powerful functions. The best way to judge the complexity of an interface is from the comments that describe it. If the interface comment for a method provides all the information needed to use the method and is also short and simple, that indicates that the method has a simple interface. Conversely, if there\u2019s no way to describe a method completely without a long and complicated comment, then the method has a complex interface. You can compare a method\u2019s interface comment with the implementation to get a sense of how deep the method is: if the interface comment must describe all the major features of the implementation, then the method is shallow. The same idea applies to variables: if it takes a long comment to fully describe a variable, it\u2019s a red flag that suggests you may not have chosen the right variable decomposition. Overall, the act of writing comments allows you to evaluate your design decisions early, so you can discover and fix problems.</p><blockquote><p>\u8BC4\u8BBA\u662F\u590D\u6742\u7164\u77FF\u4E2D\u7684\u91D1\u4E1D\u96C0\u3002\u5982\u679C\u65B9\u6CD5\u6216\u53D8\u91CF\u9700\u8981\u8F83\u957F\u7684\u6CE8\u91CA\uFF0C\u5219\u5B83\u662F\u4E00\u4E2A\u5371\u9669\u4FE1\u53F7\uFF0C\u8868\u660E\u60A8\u6CA1\u6709\u5F88\u597D\u7684\u62BD\u8C61\u3002\u8BF7\u8BB0\u4F4F\uFF0C\u5728\u7B2C 4 \u7AE0\u4E2D\uFF0C\u7C7B\u5E94\u8BE5\u5F88\u6DF1\uFF1A\u6700\u597D\u7684\u7C7B\u5177\u6709\u975E\u5E38\u7B80\u5355\u7684\u63A5\u53E3\uFF0C\u4F46\u53EF\u4EE5\u5B9E\u73B0\u5F3A\u5927\u7684\u529F\u80FD\u3002\u5224\u65AD\u63A5\u53E3\u590D\u6742\u6027\u7684\u6700\u4F73\u65B9\u6CD5\u662F\u4ECE\u63CF\u8FF0\u63A5\u53E3\u7684\u8BC4\u8BBA\u4E2D\u8FDB\u884C\u3002\u5982\u679C\u67D0\u4E2A\u65B9\u6CD5\u7684\u63A5\u53E3\u6CE8\u91CA\u63D0\u4F9B\u4E86\u4F7F\u7528\u8BE5\u65B9\u6CD5\u6240\u9700\u7684\u6240\u6709\u4FE1\u606F\uFF0C\u5E76\u4E14\u53C8\u7B80\u77ED\u53C8\u7B80\u5355\uFF0C\u5219\u8868\u660E\u8BE5\u65B9\u6CD5\u5177\u6709\u7B80\u5355\u7684\u63A5\u53E3\u3002\u76F8\u53CD\uFF0C\u5982\u679C\u6CA1\u6709\u5197\u957F\u800C\u590D\u6742\u7684\u6CE8\u91CA\u65E0\u6CD5\u5B8C\u5168\u63CF\u8FF0\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u5219\u8BE5\u65B9\u6CD5\u5177\u6709\u590D\u6742\u7684\u63A5\u53E3\u3002\u60A8\u53EF\u4EE5\u5C06\u65B9\u6CD5\u7684\u63A5\u53E3\u6CE8\u91CA\u4E0E\u5B9E\u73B0\u8FDB\u884C\u6BD4\u8F83\uFF0C\u4EE5\u4E86\u89E3\u8BE5\u65B9\u6CD5\u7684\u6DF1\u5EA6\uFF1A\u5982\u679C\u63A5\u53E3\u6CE8\u91CA\u5FC5\u987B\u63CF\u8FF0\u5B9E\u73B0\u7684\u6240\u6709\u4E3B\u8981\u529F\u80FD\uFF0C\u5219\u8BE5\u65B9\u6CD5\u5F88\u6D45\u3002\u540C\u6837\u7684\u60F3\u6CD5\u4E5F\u9002\u7528\u4E8E\u53D8\u91CF\uFF1A\u5982\u679C\u8981\u82B1\u5F88\u957F\u7684\u65F6\u95F4\u6765\u5B8C\u6574\u63CF\u8FF0\u4E00\u4E2A\u53D8\u91CF\uFF0C\u90A3\u662F\u4E00\u4E2A\u5371\u9669\u4FE1\u53F7\uFF0C\u8868\u660E\u60A8\u53EF\u80FD\u6CA1\u6709\u9009\u62E9\u6B63\u786E\u7684\u53D8\u91CF\u5206\u89E3\u3002\u603B\u4F53\u800C\u8A00\uFF0C\u7F16\u5199\u6CE8\u91CA\u7684\u884C\u4E3A\u4F7F\u60A8\u53EF\u4EE5\u53CA\u65E9\u8BC4\u4F30\u8BBE\u8BA1\u51B3\u7B56\uFF0C\u4EE5\u4FBF\u53D1\u73B0\u5E76\u89E3\u51B3\u95EE\u9898\u3002</p></blockquote><p>img Red Flag: Hard to Describe img</p><p>The comment that describes a method or variable should be simple and yet complete. If you find it difficult to write such a comment, that\u2019s an indicator that there may be a problem with the design of the thing you are describing.</p><blockquote><p>\u63CF\u8FF0\u65B9\u6CD5\u6216\u53D8\u91CF\u7684\u6CE8\u91CA\u5E94\u8BE5\u7B80\u5355\u800C\u5B8C\u6574\u3002\u5982\u679C\u60A8\u53D1\u73B0\u5F88\u96BE\u5199\u8FD9\u6837\u7684\u8BC4\u8BBA\uFF0C\u5219\u8868\u660E\u60A8\u6240\u63CF\u8FF0\u7684\u5185\u5BB9\u7684\u8BBE\u8BA1\u53EF\u80FD\u5B58\u5728\u95EE\u9898\u3002</p></blockquote><p>Of course, comments are only a good indicator of complexity if they are complete and clear. If you write a method interface comment that doesn\u2019t provide all the information needed to invoke the method, or one that is so cryptic that it\u2019s hard to understand, then that comment doesn\u2019t provide a good measure of the method\u2019s depth.</p><blockquote><p>\u5F53\u7136\uFF0C\u5982\u679C\u8BC4\u8BBA\u5B8C\u6574\u800C\u6E05\u6670\uFF0C\u90A3\u4E48\u5B83\u4EEC\u4EC5\u662F\u590D\u6742\u6027\u7684\u826F\u597D\u6307\u6807\u3002\u5982\u679C\u7F16\u5199\u7684\u65B9\u6CD5\u63A5\u53E3\u6CE8\u91CA\u672A\u63D0\u4F9B\u8C03\u7528\u8BE5\u65B9\u6CD5\u6240\u9700\u7684\u5168\u90E8\u4FE1\u606F\uFF0C\u6216\u8005\u7F16\u5199\u7684\u6CE8\u91CA\u8FC7\u4E8E\u795E\u79D8\u4EE5\u81F3\u4E8E\u96BE\u4EE5\u7406\u89E3\uFF0C\u5219\u8BE5\u6CE8\u91CA\u4E0D\u80FD\u5F88\u597D\u5730\u8861\u91CF\u8BE5\u65B9\u6CD5\u7684\u6DF1\u5EA6\u3002</p></blockquote><h2 id="_15-4-early-comments-are-fun-comments-\u65E9\u671F\u8BC4\u8BBA\u5F88\u6709\u8DA3" tabindex="-1"><a class="header-anchor" href="#_15-4-early-comments-are-fun-comments-\u65E9\u671F\u8BC4\u8BBA\u5F88\u6709\u8DA3" aria-hidden="true">#</a> 15.4 Early comments are fun comments \u65E9\u671F\u8BC4\u8BBA\u5F88\u6709\u8DA3</h2><p>The third and final benefit of writing comments early is that it makes comment-writing more fun. For me, one of the most enjoyable parts of programming is the early design phase for a new class, where I\u2019m fleshing out the abstractions and structure for the class. Most of my comments are written during this phase, and the comments are how I record and test the quality of my design decisions. I\u2019m looking for the design that can be expressed completely and clearly in the fewest words. The simpler the comments, the better I feel about my design, so finding simple comments is a source of pride. If you are programming strategically, where your main goal is a great design rather than just writing code that works, then writing comments should be fun, since that\u2019s how you identify the best designs.</p><blockquote><p>\u5C3D\u65E9\u7F16\u5199\u8BC4\u8BBA\u7684\u7B2C\u4E09\u4E2A\u4E5F\u662F\u6700\u540E\u4E00\u4E2A\u597D\u5904\u662F\uFF0C\u5B83\u4F7F\u7F16\u5199\u8BC4\u8BBA\u66F4\u52A0\u6709\u8DA3\u3002\u5BF9\u6211\u6765\u8BF4\uFF0C\u7F16\u7A0B\u4E2D\u6700\u6709\u8DA3\u7684\u90E8\u5206\u4E4B\u4E00\u662F\u65B0\u7C7B\u7684\u65E9\u671F\u8BBE\u8BA1\u9636\u6BB5\uFF0C\u5728\u90A3\u91CC\uFF0C\u6211\u5C06\u5145\u5B9E\u8BE5\u7C7B\u7684\u62BD\u8C61\u548C\u7ED3\u6784\u3002\u6211\u7684\u5927\u90E8\u5206\u8BC4\u8BBA\u90FD\u662F\u5728\u6B64\u9636\u6BB5\u7F16\u5199\u7684\uFF0C\u8FD9\u4E9B\u8BC4\u8BBA\u662F\u6211\u8BB0\u5F55\u548C\u6D4B\u8BD5\u8BBE\u8BA1\u51B3\u7B56\u8D28\u91CF\u7684\u65B9\u5F0F\u3002\u6211\u6B63\u5728\u5BFB\u627E\u53EF\u4EE5\u7528\u6700\u5C11\u7684\u8BCD\u6765\u5B8C\u6574\u800C\u6E05\u6670\u5730\u8868\u8FBE\u7684\u8BBE\u8BA1\u3002\u6CE8\u91CA\u8D8A\u7B80\u5355\uFF0C\u6211\u5BF9\u8BBE\u8BA1\u7684\u611F\u89C9\u5C31\u8D8A\u597D\uFF0C\u56E0\u6B64\u627E\u5230\u7B80\u5355\u7684\u6CE8\u91CA\u662F\u4E00\u79CD\u81EA\u8C6A\u611F\u3002\u5982\u679C\u60A8\u662F\u7B56\u7565\u6027\u7F16\u7A0B\uFF0C\u800C\u60A8\u7684\u4E3B\u8981\u76EE\u6807\u662F\u4E00\u4E2A\u51FA\u8272\u7684\u8BBE\u8BA1\uFF0C\u800C\u4E0D\u4EC5\u4EC5\u662F\u7F16\u5199\u6709\u6548\u7684\u4EE3\u7801\uFF0C\u90A3\u4E48\u7F16\u5199\u6CE8\u91CA\u5E94\u8BE5\u5F88\u6709\u8DA3\uFF0C\u56E0\u4E3A\u8FD9\u662F\u60A8\u786E\u5B9A\u6700\u4F73\u8BBE\u8BA1\u7684\u65B9\u5F0F\u3002</p></blockquote><h2 id="_15-5-are-early-comments-expensive-\u65E9\u671F\u8BC4\u8BBA\u662F\u5426\u6602\u8D35" tabindex="-1"><a class="header-anchor" href="#_15-5-are-early-comments-expensive-\u65E9\u671F\u8BC4\u8BBA\u662F\u5426\u6602\u8D35" aria-hidden="true">#</a> 15.5 Are early comments expensive? \u65E9\u671F\u8BC4\u8BBA\u662F\u5426\u6602\u8D35\uFF1F</h2><p>Now let\u2019s revisit the argument for delaying comments, which is that it avoids the cost of reworking the comments as the code evolves. A simple back-of-the-envelope calculation will show that this doesn\u2019t save much. First, estimate the total fraction of development time that you spend typing in code and comments together, including time to revise code and comments; it\u2019s unlikely that this will be more than about 10% of all development time. Even if half of your total code lines are comments, writing comments probably doesn\u2019t account for more than about 5% of your total development time. Delaying the comments until the end will save only a fraction of this, which isn\u2019t very much.</p><blockquote><p>\u73B0\u5728\uFF0C\u8BA9\u6211\u4EEC\u91CD\u65B0\u8BA8\u8BBA\u5EF6\u8FDF\u6CE8\u91CA\u7684\u53C2\u6570\uFF0C\u8FD9\u662F\u56E0\u4E3A\u5B83\u907F\u514D\u4E86\u5728\u4EE3\u7801\u6F14\u53D8\u65F6\u91CD\u65B0\u5904\u7406\u6CE8\u91CA\u7684\u5F00\u9500\u3002\u4E00\u4E2A\u7B80\u5355\u7684\u4FE1\u5C01\u8BA1\u7B97\u5C06\u663E\u793A\u8FD9\u5E76\u4E0D\u80FD\u8282\u7701\u5F88\u591A\u3002\u9996\u5148\uFF0C\u4F30\u7B97\u60A8\u4E00\u8D77\u952E\u5165\u4EE3\u7801\u548C\u6CE8\u91CA\u6240\u82B1\u8D39\u7684\u5F00\u53D1\u65F6\u95F4\u7684\u603B\u548C\uFF0C\u5305\u62EC\u4FEE\u6539\u4EE3\u7801\u548C\u6CE8\u91CA\u7684\u65F6\u95F4\uFF1B\u8FD9\u4E0D\u592A\u53EF\u80FD\u8D85\u8FC7\u6240\u6709\u5F00\u53D1\u65F6\u95F4\u7684 10\uFF05\u3002\u5373\u4F7F\u60A8\u7684\u5168\u90E8\u4EE3\u7801\u884C\u4E2D\u6709\u4E00\u534A\u662F\u6CE8\u91CA\uFF0C\u7F16\u5199\u6CE8\u91CA\u4E5F\u53EF\u80FD\u4E0D\u4F1A\u5360\u5F00\u53D1\u603B\u65F6\u95F4\u7684 5\uFF05\u4EE5\u4E0A\u3002\u5C06\u8BC4\u8BBA\u5EF6\u8FDF\u5230\u6700\u540E\u53EA\u4F1A\u8282\u7701\u5176\u4E2D\u7684\u4E00\u5C0F\u90E8\u5206\uFF0C\u8FD9\u4E0D\u662F\u5F88\u591A\u3002</p></blockquote><p>Writing the comments first will mean that the abstractions will be more stable before you start writing code. This will probably save time during coding. In contrast, if you write the code first, the abstractions will probably evolve as you code, which will require more code revisions than the comments-first approach. When you consider all of these factors, it\u2019s possible that it might be faster overall to write the comments first.</p><blockquote><p>\u9996\u5148\u7F16\u5199\u6CE8\u91CA\u5C06\u610F\u5473\u7740\u5728\u5F00\u59CB\u7F16\u5199\u4EE3\u7801\u4E4B\u524D\uFF0C\u62BD\u8C61\u5C06\u66F4\u52A0\u7A33\u5B9A\u3002\u8FD9\u53EF\u80FD\u4F1A\u8282\u7701\u7F16\u7801\u65F6\u95F4\u3002\u76F8\u53CD\uFF0C\u5982\u679C\u60A8\u9996\u5148\u7F16\u5199\u4EE3\u7801\uFF0C\u5219\u62BD\u8C61\u53EF\u80FD\u4F1A\u968F\u4EE3\u7801\u7684\u53D1\u5C55\u800C\u53D8\u5316\uFF0C\u4E0E\u6CE8\u91CA\u4F18\u5148\u65B9\u6CD5\u76F8\u6BD4\uFF0C\u5C06\u9700\u8981\u66F4\u591A\u7684\u4EE3\u7801\u4FEE\u8BA2\u3002\u5F53\u60A8\u8003\u8651\u6240\u6709\u8FD9\u4E9B\u56E0\u7D20\u65F6\uFF0C\u53EF\u80FD\u9996\u5148\u6574\u4F53\u7F16\u5199\u6CE8\u91CA\u53EF\u80FD\u4F1A\u66F4\u5FEB\u3002</p></blockquote><h2 id="_15-6-conclusion-\u7ED3\u8BBA" tabindex="-1"><a class="header-anchor" href="#_15-6-conclusion-\u7ED3\u8BBA" aria-hidden="true">#</a> 15.6 Conclusion \u7ED3\u8BBA</h2><p>If you haven\u2019t ever tried writing the comments first, give it a try. Stick with it long enough to get used to it. Then think about how it affects the quality of your comments, the quality of your design, and your overall enjoyment of software development. After you have tried this for a while, let me know whether your experience matches mine, and why or why not.</p><blockquote><p>\u5982\u679C\u60A8\u4ECE\u672A\u5C1D\u8BD5\u8FC7\u5148\u7F16\u5199\u6CE8\u91CA\uFF0C\u8BF7\u5C1D\u8BD5\u4E00\u4E0B\u3002\u575A\u6301\u8DB3\u591F\u957F\u7684\u65F6\u95F4\u6765\u4E60\u60EF\u5B83\u3002\u7136\u540E\u8003\u8651\u5B83\u5982\u4F55\u5F71\u54CD\u60A8\u7684\u8BC4\u8BBA\u8D28\u91CF\uFF0C\u8BBE\u8BA1\u8D28\u91CF\u4EE5\u53CA\u8F6F\u4EF6\u5F00\u53D1\u7684\u6574\u4F53\u4E50\u8DA3\u3002\u5728\u5C1D\u8BD5\u4E86\u4E00\u6BB5\u65F6\u95F4\u4E4B\u540E\uFF0C\u8BA9\u6211\u77E5\u9053\u60A8\u7684\u7ECF\u5386\u662F\u5426\u4E0E\u6211\u7684\u76F8\u7B26\uFF0C\u4EE5\u53CA\u4E3A\u4EC0\u4E48\u6216\u4E3A\u4EC0\u4E48\u4E0D\u8FD9\u6837\u3002</p></blockquote>',42);function a(n,s){return i}var h=e(o,[["render",a],["__file","ch15.html.vue"]]);export{h as default};
